<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Cadastrar Produto</title>
  </head>
  <body>
    <h1>Cadastrar Produto</h1>

    <form id="form-produto">
      
      <label for="codigo">Código:</label>
      <input type="text" id="codigo" name="codigo"/>

      <label for="descricao">Descrição:</label>
      <input type="text" id="descricao" name="descricao"/>

      <label for="estoque">Estoque:</label>
      <input type="number" id="estoque" name="estoque"/>

      <label for="preco">Preço:</label>
      <input type="number" id="preco" name="preco"/>

      <button type="submit">Cadastrar</button>
    </form>

    <script type="module">
      import Produto from "./produto.js";
      import RepositorioProduto from "./repositorio-produto.js";

      const formProduto = document.querySelector("#form-produto");

      formProduto.addEventListener("submit", (event) => {
        event.preventDefault();

        const codigo = formProduto.codigo.value;
        const descricao = formProduto.descricao.value;
        const estoque = formProduto.estoque.value;
        const preco = formProduto.preco.value;

        const produto = new Produto(codigo, descricao, estoque, preco);
        const repositorio = new RepositorioProduto();

        repositorio.adicionar(produto);

        location.href = "listagem-produtos.html";
      });
    </script>
  </body>
</html>
